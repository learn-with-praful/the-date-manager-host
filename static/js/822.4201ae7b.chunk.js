"use strict";(self.webpackChunkthe_date_manager=self.webpackChunkthe_date_manager||[]).push([[822],{8822:function(e,n,i){i.r(n),i.d(n,{default:function(){return A}});var a=i(1413),r=i(9439),l=i(2791),s=i(1889),o=i(3044),d=i(8550),t=i(8096),u=i(4925),c=i(4415),m=i(4387),f=i(6151),h=i(2455),v=i(6914),p=i(7454),Z=i(2506),w=i(4457),x=i(2797),P=i(7715),b=i(3657),j=i(5574),g=i(5661),C=i(9157),N=i(7123),S=i(8518),z=i(184),R=x.Ry().shape({currentPassword:x.Z_().transform((function(e){return e.trim()})).label("Password").required("Required"),newPassword:x.Z_().transform((function(e){return e.trim()})).required("Required").label("New Password").min(8),confirmNewPassword:x.Z_().transform((function(e){return e.trim()})).label("Confirm New Password").min(8).required("Required").oneOf([x.iH("newPassword"),null],"Passwords must match")});function k(e){var n=e.open,i=e.handleClose,r=(0,p.fz)(v.RG);(0,p.UX)(v.RG,{onSuccess:function(e){var n;(0,S.yv)(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message,{variant:"success"}),i()},onError:function(e){var n;(0,S.yv)(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.message,{variant:"error"})}});var o=(0,Z.TA)({initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:R,onSubmit:function(e){v.RG.call({params:e})}}),t=o.values,u=o.handleChange,c=o.handleBlur,m=o.touched,h=o.errors;(0,l.useEffect)((function(){n||o.resetForm()}),[n]);var w=function(e){return{fullWidth:!0,name:e,value:t[e],onChange:u,onBlur:c,helperText:m[e]&&h[e],error:m[e]&&h[e]}};return(0,z.jsxs)(j.Z,{fullWidth:!0,open:n,onClose:i,children:[(0,z.jsx)(g.Z,{children:"Change Password"}),(0,z.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,z.jsx)(C.Z,{children:(0,z.jsxs)(s.ZP,{display:"flex",flexDirection:"column",gap:1,children:[(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},w("currentPassword")),{},{placeholder:"Current Password",label:"Current Password"})),(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},w("newPassword")),{},{placeholder:"New Password",label:"New Password"})),(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},w("confirmNewPassword")),{},{placeholder:"Confirm New Password",label:"Confirm New Password"}))]})}),(0,z.jsxs)(N.Z,{children:[(0,z.jsx)(f.Z,{onClick:i,variant:"text",children:"Cancel"}),(0,z.jsx)(f.Z,{type:"submit",disabled:r.loading,children:"Save"})]})]})]})}var y=(0,h.Z)((function(e){return{dmUserProfileInfo:{padding:e.spacing(1.5),borderRadius:e.shape.borderRadius,display:"flex",position:"relative",marginTop:e.spacing(1),width:"fit-content",margin:"auto","&>div":{width:"100px",height:"100px"}},dmEditingProfile:{"&>div":{marginTop:e.spacing(2),width:"100%"}},dmEditProfileIcon:{position:"absolute !important",right:10,top:10},dmUserAction:{marginTop:e.spacing(1),display:"flex",justifyContent:"space-between"}}})),T=x.Ry().shape({name:x.Z_().transform((function(e){return e.trim()})).label("Name").required("Required")}),q={name:"",email:"",timezone:""};function A(){var e,n,i,h,x,j,g=y(),C=(0,l.useState)(q),N=(0,r.Z)(C,2),S=N[0],R=N[1],A=(0,l.useState)(!1),E=(0,r.Z)(A,2),_=E[0],U=E[1],W=(0,p.fz)(v.fk),I=(0,p.fz)(v.S3);(0,l.useEffect)((function(){var e;if(null!==W&&void 0!==W&&null!==(e=W.data)&&void 0!==e&&e.user){var n,i=null===W||void 0===W||null===(n=W.data)||void 0===n?void 0:n.user;R({name:i.name,email:i.email,timezone:i.timezone})}}),[W]);var V=(0,Z.TA)({enableReinitialize:!0,initialValues:S,onSubmit:function(e){v.S3.call({params:e})},validationSchema:T});return(0,z.jsxs)(P.Z,{backAction:!0,title:"Account",children:[null!==W&&void 0!==W&&W.loading?(0,z.jsx)(b.p,{}):(0,z.jsxs)(s.ZP,{children:[(0,z.jsx)(s.ZP,{className:g.dmUserProfileInfo,children:(0,z.jsx)(o.Z,{src:null===W||void 0===W||null===(e=W.data)||void 0===e||null===(n=e.user)||void 0===n?void 0:n.profileUrl,alt:"profile-img",children:(null===W||void 0===W||null===(i=W.data)||void 0===i||null===(h=i.user)||void 0===h||null===(x=h.name)||void 0===x||null===(j=x[0])||void 0===j?void 0:j.toUpperCase())||"-"})}),(0,z.jsxs)(s.ZP,{children:[(0,z.jsxs)(s.ZP,{className:g.dmEditingProfile,children:[(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},(0,w.MT)(V,"name")),{},{fullWidth:!0,label:"Name",placeholder:"Name"})),(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},(0,w.MT)(V,"email")),{},{disabled:!0,fullWidth:!0,label:"Email",placeholder:"Email"})),(0,z.jsxs)(t.Z,{fullWidth:!0,children:[(0,z.jsx)(u.Z,{id:"timezone-input",children:"Timezone"}),(0,z.jsx)(c.Z,{disabled:!0,defaultValue:V.values.timezone,labelId:"timezone-input",label:"Timezone",value:V.values.timezone,children:(0,z.jsx)(m.Z,{value:"Asia/Kolkata",children:"Asia/Kolkata"})})]})]}),(0,z.jsxs)(s.ZP,{className:g.dmUserAction,children:[(0,z.jsx)(f.Z,{onClick:function(){return U(!0)},children:"Change Password"}),(0,z.jsx)(f.Z,{onClick:V.handleSubmit,type:"submit",disabled:!V.dirty||!V.isValid||I.loading,children:"Save"})]})]})]}),(0,z.jsx)(k,{open:_,handleClose:function(){return U(!1)}})]})}}}]);
//# sourceMappingURL=822.4201ae7b.chunk.js.map