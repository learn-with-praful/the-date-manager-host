"use strict";(self.webpackChunkthe_date_manager=self.webpackChunkthe_date_manager||[]).push([[822],{8822:function(e,i,n){n.r(i),n.d(i,{default:function(){return A}});var a=n(1413),l=n(9439),r=n(2791),s=n(1889),o=n(3044),d=n(8550),t=n(8096),u=n(4925),c=n(4415),m=n(4387),h=n(6151),f=n(2455),v=n(6914),p=n(7454),Z=n(2506),w=n(4457),x=n(2797),P=n(7715),b=n(3657),j=n(5574),g=n(5661),C=n(9157),N=n(7123),S=n(8518),z=n(184),R=x.Ry().shape({currentPassword:x.Z_().label("Password").required("Required"),newPassword:x.Z_().required("Required").label("New Password").min(8),confirmNewPassword:x.Z_().label("Confirm New Password").min(8).required("Required").oneOf([x.iH("newPassword"),null],"Passwords must match")});function k(e){var i=e.open,n=e.handleClose,l=(0,p.fz)(v.RG);(0,p.UX)(v.RG,{onSuccess:function(e){var i;(0,S.yv)(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message,{variant:"success"}),n()},onError:function(e){var i;(0,S.yv)(null===e||void 0===e||null===(i=e.error)||void 0===i?void 0:i.message,{variant:"error"})}});var o=(0,Z.TA)({initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:R,onSubmit:function(e){v.RG.call({params:e})}}),t=o.values,u=o.handleChange,c=o.handleBlur,m=o.touched,f=o.errors;(0,r.useEffect)((function(){i||o.resetForm()}),[i]);var w=function(e){return{fullWidth:!0,name:e,value:t[e],onChange:u,onBlur:c,helperText:m[e]&&f[e],error:m[e]&&f[e]}};return(0,z.jsxs)(j.Z,{fullWidth:!0,open:i,onClose:n,children:[(0,z.jsx)(g.Z,{children:"Change Password"}),(0,z.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,z.jsx)(C.Z,{children:(0,z.jsxs)(s.ZP,{display:"flex",flexDirection:"column",gap:1,children:[(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},w("currentPassword")),{},{placeholder:"Current Password",label:"Current Password"})),(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},w("newPassword")),{},{placeholder:"New Password",label:"New Password"})),(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},w("confirmNewPassword")),{},{placeholder:"Confirm New Password",label:"Confirm New Password"}))]})}),(0,z.jsxs)(N.Z,{children:[(0,z.jsx)(h.Z,{onClick:n,variant:"text",children:"Cancel"}),(0,z.jsx)(h.Z,{type:"submit",disabled:l.loading,children:"Save"})]})]})]})}var y=(0,f.Z)((function(e){return{dmUserProfileInfo:{padding:e.spacing(1.5),borderRadius:e.shape.borderRadius,display:"flex",position:"relative",marginTop:e.spacing(1),width:"fit-content",margin:"auto","&>div":{width:"100px",height:"100px"}},dmEditingProfile:{"&>div":{marginTop:e.spacing(2),width:"100%"}},dmEditProfileIcon:{position:"absolute !important",right:10,top:10},dmUserAction:{marginTop:e.spacing(1),display:"flex",justifyContent:"space-between"}}})),T=x.Ry().shape({name:x.Z_().required("Required")}),q={name:"",email:"",timezone:""};function A(){var e,i,n,f,x,j,g=y(),C=(0,r.useState)(q),N=(0,l.Z)(C,2),S=N[0],R=N[1],A=(0,r.useState)(!1),E=(0,l.Z)(A,2),_=E[0],U=E[1],W=(0,p.fz)(v.fk),I=(0,p.fz)(v.S3);(0,r.useEffect)((function(){var e;if(null!==W&&void 0!==W&&null!==(e=W.data)&&void 0!==e&&e.user){var i,n=null===W||void 0===W||null===(i=W.data)||void 0===i?void 0:i.user;R({name:n.name,email:n.email,timezone:n.timezone})}}),[W]);var V=(0,Z.TA)({enableReinitialize:!0,initialValues:S,onSubmit:function(e){v.S3.call({params:e})},validationSchema:T});return(0,z.jsxs)(P.Z,{backAction:!0,title:"Account",children:[null!==W&&void 0!==W&&W.loading?(0,z.jsx)(b.p,{}):(0,z.jsxs)(s.ZP,{children:[(0,z.jsx)(s.ZP,{className:g.dmUserProfileInfo,children:(0,z.jsx)(o.Z,{src:null===W||void 0===W||null===(e=W.data)||void 0===e||null===(i=e.user)||void 0===i?void 0:i.profileUrl,alt:"profile-img",children:(null===W||void 0===W||null===(n=W.data)||void 0===n||null===(f=n.user)||void 0===f||null===(x=f.name)||void 0===x||null===(j=x[0])||void 0===j?void 0:j.toUpperCase())||"-"})}),(0,z.jsxs)(s.ZP,{children:[(0,z.jsxs)(s.ZP,{className:g.dmEditingProfile,children:[(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},(0,w.MT)(V,"name")),{},{fullWidth:!0,label:"Name",placeholder:"Name"})),(0,z.jsx)(d.Z,(0,a.Z)((0,a.Z)({},(0,w.MT)(V,"email")),{},{disabled:!0,fullWidth:!0,label:"Email",placeholder:"Email"})),(0,z.jsxs)(t.Z,{fullWidth:!0,children:[(0,z.jsx)(u.Z,{id:"timezone-input",children:"Timezone"}),(0,z.jsx)(c.Z,{disabled:!0,defaultValue:V.values.timezone,labelId:"timezone-input",label:"Timezone",value:V.values.timezone,children:(0,z.jsx)(m.Z,{value:"Asia/Kolkata",children:"Asia/Kolkata"})})]})]}),(0,z.jsxs)(s.ZP,{className:g.dmUserAction,children:[(0,z.jsx)(h.Z,{onClick:function(){return U(!0)},children:"Change Password"}),(0,z.jsx)(h.Z,{onClick:V.handleSubmit,type:"submit",disabled:!V.dirty||!V.isValid||I.loading,children:"Save"})]})]})]}),(0,z.jsx)(k,{open:_,handleClose:function(){return U(!1)}})]})}}}]);
//# sourceMappingURL=822.928141e8.chunk.js.map