"use strict";(self.webpackChunkthe_date_manager=self.webpackChunkthe_date_manager||[]).push([[822],{8822:(e,l,i)=>{i.r(l),i.d(l,{default:()=>T});var a=i(2791),s=i(1889),n=i(3044),r=i(8550),d=i(8096),o=i(4925),t=i(4415),u=i(4387),c=i(6151),m=i(1098),h=i(6914),v=i(7454),p=i(2506),f=i(4457),w=i(1724),x=i(7715),P=i(3657),Z=i(5574),b=i(5661),j=i(9157),g=i(7123),C=i(8518),N=i(184);const S=w.Ry().shape({currentPassword:w.Z_().label("Password").required("Required"),newPassword:w.Z_().required("Required").label("New Password").min(8),confirmNewPassword:w.Z_().label("Confirm New Password").min(8).required("Required").oneOf([w.iH("newPassword"),null],"Passwords must match")});function z(e){const{open:l,handleClose:i}=e,n=(0,v.fz)(h.RG);(0,v.UX)(h.RG,{onSuccess:e=>{var l;(0,C.yv)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,{variant:"success"}),i()},onError:e=>{var l;(0,C.yv)(null===e||void 0===e||null===(l=e.error)||void 0===l?void 0:l.message,{variant:"error"})}});const d=(0,p.TA)({initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:S,onSubmit:e=>{h.RG.call({params:e})}}),{values:o,handleChange:t,handleBlur:u,touched:m,errors:f}=d;(0,a.useEffect)((()=>{l||d.resetForm()}),[l]);const w=e=>({fullWidth:!0,name:e,value:o[e],onChange:t,onBlur:u,helperText:m[e]&&f[e],error:m[e]&&f[e]});return(0,N.jsxs)(Z.Z,{fullWidth:!0,open:l,onClose:i,children:[(0,N.jsx)(b.Z,{children:"Change Password"}),(0,N.jsxs)("form",{onSubmit:d.handleSubmit,children:[(0,N.jsx)(j.Z,{children:(0,N.jsxs)(s.ZP,{display:"flex",flexDirection:"column",gap:1,children:[(0,N.jsx)(r.Z,{...w("currentPassword"),placeholder:"Current Password",label:"Current Password"}),(0,N.jsx)(r.Z,{...w("newPassword"),placeholder:"New Password",label:"New Password"}),(0,N.jsx)(r.Z,{...w("confirmNewPassword"),placeholder:"Confirm New Password",label:"Confirm New Password"})]})}),(0,N.jsxs)(g.Z,{children:[(0,N.jsx)(c.Z,{onClick:i,variant:"text",children:"Cancel"}),(0,N.jsx)(c.Z,{type:"submit",disabled:n.loading,children:"Save"})]})]})]})}const R=(0,m.Z)((e=>({dmUserProfileInfo:{padding:e.spacing(1.5),borderRadius:e.shape.borderRadius,display:"flex",position:"relative",marginTop:e.spacing(1),width:"fit-content",margin:"auto","&>div":{width:"100px",height:"100px"}},dmEditingProfile:{"&>div":{marginTop:e.spacing(2),width:"100%"}},dmEditProfileIcon:{position:"absolute !important",right:10,top:10},dmUserAction:{marginTop:e.spacing(1),display:"flex",justifyContent:"space-between"}}))),k=w.Ry().shape({name:w.Z_().required("Required")});let y={name:"",email:"",timezone:""};function T(){var e,l,i,m,w,Z;const b=R(),[j,g]=(0,a.useState)(y),[C,S]=(0,a.useState)(!1),T=(0,v.fz)(h.fk),q=(0,v.fz)(h.S3);(0,a.useEffect)((()=>{var e;if(null!==T&&void 0!==T&&null!==(e=T.data)&&void 0!==e&&e.user){var l;let e=null===T||void 0===T||null===(l=T.data)||void 0===l?void 0:l.user;g({name:e.name,email:e.email,timezone:e.timezone})}}),[T]);const A=(0,p.TA)({enableReinitialize:!0,initialValues:j,onSubmit:e=>{h.S3.call({params:e})},validationSchema:k});return(0,N.jsxs)(x.Z,{backAction:!0,title:"Account",children:[null!==T&&void 0!==T&&T.loading?(0,N.jsx)(P.p,{}):(0,N.jsxs)(s.ZP,{children:[(0,N.jsx)(s.ZP,{className:b.dmUserProfileInfo,children:(0,N.jsx)(n.Z,{src:null===T||void 0===T||null===(e=T.data)||void 0===e||null===(l=e.user)||void 0===l?void 0:l.profileUrl,alt:"profile-img",children:(null===T||void 0===T||null===(i=T.data)||void 0===i||null===(m=i.user)||void 0===m||null===(w=m.name)||void 0===w||null===(Z=w[0])||void 0===Z?void 0:Z.toUpperCase())||"-"})}),(0,N.jsxs)(s.ZP,{children:[(0,N.jsxs)(s.ZP,{className:b.dmEditingProfile,children:[(0,N.jsx)(r.Z,{...(0,f.MT)(A,"name"),fullWidth:!0,label:"Name",placeholder:"Name"}),(0,N.jsx)(r.Z,{...(0,f.MT)(A,"email"),disabled:!0,fullWidth:!0,label:"Email",placeholder:"Email"}),(0,N.jsxs)(d.Z,{fullWidth:!0,children:[(0,N.jsx)(o.Z,{id:"timezone-input",children:"Timezone"}),(0,N.jsx)(t.Z,{disabled:!0,defaultValue:A.values.timezone,labelId:"timezone-input",label:"Timezone",value:A.values.timezone,children:(0,N.jsx)(u.Z,{value:"Asia/Kolkata",children:"Asia/Kolkata"})})]})]}),(0,N.jsxs)(s.ZP,{className:b.dmUserAction,children:[(0,N.jsx)(c.Z,{onClick:()=>S(!0),children:"Change Password"}),(0,N.jsx)(c.Z,{onClick:A.handleSubmit,type:"submit",disabled:!A.dirty||!A.isValid||q.loading,children:"Save"})]})]})]}),(0,N.jsx)(z,{open:C,handleClose:()=>S(!1)})]})}}}]);
//# sourceMappingURL=822.f01e3a6a.chunk.js.map